# LucyAgent：LLM-based agent设计实践

## brain模块

### 记忆模块设计

#### 记忆单元
- 记忆单元由其记忆描述，创建时间，描述的嵌入构成。
- 记忆流是记忆单元的简单列表。

```python
memory = {
    "description": "记忆描述",
    "create_time": "创建时间",
    "embedding": "嵌入向量",
}
```

#### 记忆系统设计
- 创建记忆 (`create_memory`)：根据输入和输出创建一个记忆摘要。这个摘要包含了事件的描述，创建时间，以及通过外部API生成的嵌入向量
- 添加记忆 (`add_memory`)：将记忆被添加到记忆流中。当记忆流达到设定的上限时，会自动触发总结记忆的过程。
- 总结记忆 (`summarize_memory`)：在总结记忆中，最相似的几个记忆会被总结并形成一个新的记忆，然后被添加到记忆流中。
- 删除记忆 (`del_memory`)：按索引删除记忆或者清空所有记忆，也支持删除与某个查询最相似的记忆。
- 展示记忆 (`show_memory`)：展示记忆功能会列出所有记忆摘要、创建时间和嵌入向量的大小。
- 搜索记忆 (`search_memory`)：通过计算查询文本的嵌入与记忆流中每个记忆的嵌入之间的相似度，搜索功能可以找到最匹配的记忆。

#### 知识单元
- 知识单元由其知识文本和文本的嵌入构成。
- 知识库是知识单元的集合，可以是简单列表或者更复杂的数据结构，如搜索树，以便于高效检索。

```python
knowledge = {
    "text": "知识文本",
    "embedding": "嵌入向量",
}
```

#### 知识系统设计
- 提取知识 (`extract_knowledge`)：从给定的文本中提取知识点，并生成嵌入向量。这通常涉及对文本的理解和总结。
- 添加知识 (`add_knowledge`)：将提取的知识和对应的嵌入向量添加到知识库中。
- 删除知识 (`del_knowledge`)：按索引删除知识或者清空所有知识。
- 展示知识 (`show_knowledge`)：展示知识功能会列出所有知识文本和嵌入向量的大小。
- 搜索知识 (`search_knowledge`)：通过计算查询文本的嵌入与知识库中每个知识的嵌入之间的相似度，搜索功能可以找到最匹配的知识。
